<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>部署 on 资深网民孙先生</title><link>https://blog.tot.yt/tags/%E9%83%A8%E7%BD%B2/</link><description>Recent content in 部署 on 资深网民孙先生</description><generator>Hugo</generator><language>zh-cn</language><lastBuildDate>Tue, 12 Dec 2023 03:31:35 +0000</lastBuildDate><atom:link href="https://blog.tot.yt/tags/%E9%83%A8%E7%BD%B2/index.xml" rel="self" type="application/rss+xml"/><item><title>fly.io部署typecho</title><link>https://blog.tot.yt/archives/405/</link><pubDate>Tue, 12 Dec 2023 03:31:35 +0000</pubDate><guid>https://blog.tot.yt/archives/405/</guid><description>示例 本站使用fly.io部署
fly.toml app = &amp;#34;avnvu&amp;#34; primary_region = &amp;#34;hkg&amp;#34; [build] image = &amp;#34;joyqi/typecho:nightly-php7.4-apache&amp;#34; [env] TIMEZONE = &amp;#34;Asia/Shanghai&amp;#34; TYPECHO_SITE_URL = &amp;#34;https://www.avnvu.com&amp;#34; [[mounts]] source = &amp;#34;typecho_data&amp;#34; destination = &amp;#34;/app/usr&amp;#34; [http_service] internal_port = 80 force_https = true auto_stop_machines = false auto_start_machines = true min_machines_running = 1 processes = [&amp;#34;app&amp;#34;] 赋权 如果安装过程需要赋权 则使用命令
fly ssh console 登录容器执行
chmod -R 777 usr 即可</description></item><item><title>在fly.io部署Gotosocial-一个 ActivityPub 联邦社交网络程序.</title><link>https://blog.tot.yt/archives/355/</link><pubDate>Thu, 17 Aug 2023 03:21:00 +0000</pubDate><guid>https://blog.tot.yt/archives/355/</guid><description>关于Gotosocial GoToSocial 是一个十分轻量（轻量到甚至没有用户界面，需要使用第三方程序登录、兼容 Mastodon 应用进行使用）的 ActivityPub 联邦社交网络程序，自建 GoToSocial 可以避免您的信息因为所在实例倒闭、不可抗力等原因化为乌有。
准备 注册 Fly.io 账号，并绑卡（避免滥用）； 注册 Cloudflare 并启用 R2，启用 R2 需要绑卡。新建一个储存桶并创建一个 API 令牌。 安装 flyctl Linux curl -L https://fly.io/install.sh | sh macOS curl -L https://fly.io/install.sh | sh Windows，需要开启 RemoteSigned: 管理员运行 Set-ExecutionPolicy -ExecutionPolicy RemoteSigned powershell -Command &amp;#34;iwr https://fly.io/install.ps1 -useb | iex&amp;#34; 登录 flyctl auth login # 若登录失败使用 # flyctl auth login -i # 输入账号密码进行登录 创建APP YOURAPPNAME更改为自己希望设置的名称
flyctl launch --name YOURAPPNAME --image=superseriousbusiness/gotosocial:latest --region hkg --no-deploy 创建储存卷 flyctl volumes create social_data --region hkg --size 1 编辑配置 编辑根目录下的 fly.</description></item><item><title>在fly.io部署Memos并自动备份数据库</title><link>https://blog.tot.yt/archives/%E5%9C%A8fly-io%E9%83%A8%E7%BD%B2memos%E5%B9%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93/</link><pubDate>Tue, 15 Aug 2023 02:02:00 +0000</pubDate><guid>https://blog.tot.yt/archives/%E5%9C%A8fly-io%E9%83%A8%E7%BD%B2memos%E5%B9%B6%E8%87%AA%E5%8A%A8%E5%A4%87%E4%BB%BD%E6%95%B0%E6%8D%AE%E5%BA%93/</guid><description>参考项目 https://github.com/hu3rror/memos-on-fly 准备工作 1.注册FLY.IO 用以部署memos 2.注册B2C https://www.backblaze.com/cloud-storage 用以同步备份memos数据库 新建BUCKET,并获取&amp;lt;keyId&amp;gt;和&amp;lt;applicationKey&amp;gt;
安装flyctl Install flyctl 以WINDOWS为例
pwsh -Command &amp;#34;iwr https://fly.io/install.ps1 -useb | iex&amp;#34; 其他系统请参照官方
新建APP 初始化
flyctl launch 按照提示选择会生成一个FLY.TOML文件
编辑FLY.TOML 添加以下内容
[build] image = &amp;#34;ghcr.io/hu3rror/memos-litestream:latest&amp;#34; #如果不需要备份数据库则可以选择官方的docker镜像ghcr.io/usememos/memos:latest #使用官方镜像可以删掉env的部分 [env] # Details see: https://litestream.io/guides/backblaze/ LITESTREAM_REPLICA_BUCKET = &amp;#34;B2C桶名称&amp;#34; # change to your litestream bucket name LITESTREAM_REPLICA_ENDPOINT = &amp;#34;s3.us-east-005.backblazeb2.com&amp;#34; # change to your litestream endpoint url LITESTREAM_REPLICA_PATH = &amp;#34;memos_prod.db&amp;#34; # keep the default or change to whatever path you want [[mounts]] source = &amp;#34;memos_data&amp;#34; destination = &amp;#34;/var/opt/memos&amp;#34; [http_service] internal_port = 5230 force_https = true auto_stop_machines = false auto_start_machines = true min_machines_running = 0 添加1g存储空间 flyctl volumes create memos_data --region hkg --size 1 添加密钥 将B2存储的密钥添加到fly的密钥存储中, 使用官方镜像可以忽略此步骤</description></item><item><title>在fly.io部署artalk评论系统</title><link>https://blog.tot.yt/archives/%E5%9C%A8fly%E9%83%A8%E7%BD%B2artalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/</link><pubDate>Tue, 15 Aug 2023 01:37:00 +0000</pubDate><guid>https://blog.tot.yt/archives/%E5%9C%A8fly%E9%83%A8%E7%BD%B2artalk%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/</guid><description>众所周知Fly.io是一个免费的SAAS平台 提供三个内存为256MB,总3G硬盘空间. 为防止滥用,需要绑定信用卡.
Free allowances Resources included for free on all plans: Up to 3 shared-cpu-1x 256mb VMs† 3GB persistent volume storage (total) 160GB outbound data transfer 准备 安装官方的命令行工具flyctl
初始化 flyctl launch 根据提示创建一个app
创建一个1G的硬盘 1G的硬盘用来储存评论数据绰绰有余了
flyctl volumes create artalk_data --region hkg --size 1 编辑FLY.TOML #根据自动生成的FLY.TOML文件修改 app = &amp;#34;atim&amp;#34; primary_region = &amp;#34;hkg&amp;#34; [build] image = &amp;#34;artalk/artalk-go&amp;#34; [http_service] internal_port = 23366 force_https = true auto_stop_machines = true auto_start_machines = true min_machines_running = 0 processes = [&amp;#34;app&amp;#34;] [[mounts]] source = &amp;#34;artalk_data&amp;#34; destination = &amp;#34;/data&amp;#34; [experimental] vm = true 在 fly.</description></item></channel></rss>